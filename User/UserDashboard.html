<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>User Dashboard - GoTripSC</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<style>
		:root{
			--bg:#f6f8fb;
			--card:#ffffff;
			--accent:#0d6efd;
			--muted:#6b7280;
			--danger:#e11d48;
		}
		html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111}
		.app{display:flex;min-height:100vh}

	/* Sidebar (expanded icon + label style) */
	.sidebar{width:220px;background:#fff;padding:20px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 0 0 1px rgba(0,0,0,0.04);gap:12px}
	.logo-box{width:64px;height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;margin-bottom:6px;margin-left:6px}
	nav{display:flex;flex-direction:column;gap:6px;flex:1;width:100%}
	.nav-item{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;margin:4px 4px;background:transparent;color:#222;text-decoration:none}
	.nav-item i{font-size:18px;min-width:22px;text-align:center;color:#0f1724}
	.nav-item .label{font-size:15px}
	.nav-item:hover{background:rgba(13,110,253,0.04)}
	.nav-item.active{background:rgba(13,110,253,0.08);position:relative;font-weight:600}
	.nav-item.active::before{content:'';position:absolute;left:0;top:8px;width:4px;height:calc(100% - 16px);background:var(--accent);border-radius:6px}
	.bottom-links{margin-bottom:8px;width:100%;display:flex;flex-direction:column;align-items:flex-start;gap:12px}
	.logout{display:inline-flex;align-items:center;gap:8px;padding:12px 18px;border-radius:12px;background:var(--danger);color:#fff;text-decoration:none;font-weight:700;margin-left:4px;box-shadow:0 6px 18px rgba(225,29,72,0.12)}
	.sidebar-links{display:flex;flex-direction:column;gap:8px;margin-left:4px}
	.sidebar-links a{color:var(--muted);text-decoration:none;display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:8px}
	.sidebar-links a:hover{background:rgba(0,0,0,0.03);color:#111}
	.socials{display:flex;gap:10px;margin-left:6px;margin-top:6px}
	.socials a{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;color:var(--muted);text-decoration:none}

		/* Main content area */
		.main{flex:1;padding:20px 28px}
		.topbar{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
		.search-bar{flex:1;display:flex;gap:8px;align-items:center}
		.search-bar input,.search-bar select{padding:10px 12px;border-radius:8px;border:1px solid #e6e9ef;background:#fff}
		.welcome{font-size:20px;font-weight:600}

		.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
		.col-4{grid-column:span 4}
		.col-6{grid-column:span 6}
		.col-8{grid-column:span 8}
		.col-12{grid-column:span 12}

		.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 1px 2px rgba(16,24,40,0.04);}
		.section-title{font-weight:700;margin-bottom:8px}

		.upcoming-list{display:flex;flex-direction:column;gap:10px}
		.upcoming-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;border:1px solid #f1f3f5}
		.status{padding:6px 8px;border-radius:8px;font-weight:600}
		.status.confirmed{background:#e6f4ea;color:#0f5132}
		.status.pending{background:#fff4e6;color:#7a4100}
		.status.cancelled{background:#ffe5e5;color:#812121}

		/* Booking history tables */
		table{width:100%;border-collapse:collapse}
		th,td{padding:10px;border-bottom:1px solid #f1f3f5;text-align:left}

			/* Progress bar for upcoming bookings */
			.progress{background:#eef2ff;border-radius:8px;overflow:hidden;height:10px;width:160px}
			.progress-bar{height:100%;background:linear-gradient(90deg,#0d6efd,#2563eb);width:0}
			.upcoming-meta{display:flex;flex-direction:column;gap:6px}
			.upcoming-actions{display:flex;gap:8px;align-items:center}

			/* Action buttons: white background, subtle border (applies to upcoming and past action buttons) */
			.upcoming-actions button,
			.actions button,
			#upcomingList button,
			#upcomingDetailed button,
			#pastList button {
				background: #fff;
				color: #111;
				border: 1px solid #d1d5db;
				padding: 7px 10px;
				border-radius: 8px;
				cursor: pointer;
				box-shadow: 0 1px 2px rgba(16,24,40,0.04);
			}
			.upcoming-actions button:hover,
			.actions button:hover,
			#pastList button:hover { background:#fafafa; }

		/* Responsive */
		@media (max-width:900px){
			.grid{grid-template-columns:repeat(6,1fr)}
			.col-4{grid-column:span 6}
			.col-6{grid-column:span 6}
			.sidebar{display:none}
		}

		/* Utility and organization styles */
		.section { margin-bottom: 12px; }
		.card { padding: 16px; }
		.card-title { font-weight:700; margin-bottom:8px; color:var(--accent); }
		.muted { color:var(--muted); font-size:13px; }
		.actions { display:flex; gap:8px; align-items:center; }
		.table-responsive { overflow:auto; }
	</style>
</head>
<body>
	<div class="app">
		<aside class="sidebar">
			<div class="logo-box"> 
				<!-- small logo image if available -->
				<img src="/HomePage/Photos/GoTrip Logo.png" alt="GoTrip" style="width:56px;height:56px;object-fit:contain">
			</div>
			<nav>
				<a href="../HomePage/HomePage.html" class="nav-item" id="nav-home"><i class="bi bi-house"></i><span class="label">Home</span></a>
				<a href="/HomePage/HomePage.html" class="nav-item" id="nav-flights"><i class="bi bi-airplane"></i><span class="label">Flights</span></a>
				<a href="../HomePage/HomePageBuses.html" class="nav-item" id="nav-buses"><i class="bi bi-bus-front"></i><span class="label">Buses</span></a>
				<a href="../HomePage/HomePageHotels.html" class="nav-item" id="nav-hotels"><i class="bi bi-building"></i><span class="label">Hotels</span></a>
				<a href="my-trips.html" class="nav-item" id="nav-bookings"><i class="bi bi-journal-bookmark"></i><span class="label">My Bookings</span></a>
				<a href="profile.html" class="nav-item" id="nav-profile"><i class="bi bi-person"></i><span class="label">Profile</span></a>
				<a href="UserDashboard.html" class="nav-item active" id="nav-dashboard"><i class="bi bi-speedometer2"></i><span class="label">Dashboard</span></a>
				<a href="#" class="nav-item" id="nav-help"><i class="bi bi-question-circle"></i><span class="label">Help & Support</span></a>
			</nav>
			<div class="bottom-links">
				<a class="logout" onclick="logout()" style="cursor:pointer"><i class="bi bi-box-arrow-right"></i><span class="label">Log out</span></a>

				<div class="sidebar-links">
					<a href="#"> <i class="bi bi-info-circle"></i> About Us</a>
					<a href="#"> <i class="bi bi-file-earmark-text"></i> Terms &amp; Conditions</a>
					<a href="#"> <i class="bi bi-shield-lock"></i> Privacy Policy</a>
					<div class="socials">
						<a href="#" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
						<a href="#" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
					</div>
				</div>
			</div>
		</aside>

		<main class="main">
			<div class="topbar">
				<div style="display:flex;flex-direction:column;">
					<div class="welcome" id="welcomeMsg">Welcome back!</div>
					<div style="color:var(--muted);font-size:13px">Here's a summary of your travel activity</div>
				</div>

				<div class="search-bar">
					<input type="search" id="quickSearch" placeholder="Search flights, buses, hotels..." style="min-width:300px">
					<input type="date" id="searchDate">
					<select id="searchType"><option value="all">All</option><option value="flight">Flight</option><option value="bus">Bus</option><option value="hotel">Hotel</option></select>
					<button onclick="performSearch()" style="padding:10px 14px;border-radius:8px;background:var(--accent);color:#fff;border:none">Search</button>
				</div>
			</div>

			<section class="grid" style="margin-bottom:18px">
				<!-- Upcoming Overview -->
				<div class="col-4 card">
					<div class="section-title">Upcoming Trips</div>
					<div class="upcoming-list" id="upcomingList">
						<div class="upcoming-item" data-date="2025-11-15">
							<div class="upcoming-meta">
								<div style="font-weight:700">Flight: Tbilisi → Istanbul</div>
								<div class="muted">2025-11-15 · 18:30</div>
								<div class="progress"><div class="progress-bar" style="width:0" aria-hidden="true"></div></div>
							</div>
							<div style="text-align:right">
								<div class="status confirmed">Confirmed</div>
								<div class="upcoming-actions" style="margin-top:8px">
									<button onclick="viewBooking('flight',1)" style="padding:7px 10px;border-radius:8px">View</button>
									<button onclick="modifyBooking('flight',1)" style="padding:7px 10px;border-radius:8px">Modify</button>
									<button onclick="cancelBooking('flight',1)" style="padding:7px 10px;border-radius:8px">Cancel</button>
								</div>
							</div>
						</div>

						<div class="upcoming-item" data-date="2025-11-20">
							<div class="upcoming-meta">
								<div style="font-weight:700">Bus: Tbilisi → Batumi</div>
								<div class="muted">2025-11-20 · 09:00</div>
								<div class="progress"><div class="progress-bar" style="width:0"></div></div>
							</div>
							<div style="text-align:right">
								<div class="status pending">Pending</div>
								<div class="upcoming-actions" style="margin-top:8px">
									<button onclick="viewBooking('bus',2)" style="padding:7px 10px;border-radius:8px">View</button>
									<button onclick="modifyBooking('bus',2)" style="padding:7px 10px;border-radius:8px">Modify</button>
									<button onclick="cancelBooking('bus',2)" style="padding:7px 10px;border-radius:8px">Cancel</button>
								</div>
							</div>
						</div>

						<div class="upcoming-item" data-date="2025-11-15">
							<div class="upcoming-meta">
								<div style="font-weight:700">Hotel: Tbilisi Grand</div>
								<div class="muted">Check-in: 2025-11-15 · Check-out: 2025-11-18</div>
								<div class="progress"><div class="progress-bar" style="width:0"></div></div>
							</div>
							<div style="text-align:right">
								<div class="status confirmed">Confirmed</div>
								<div class="upcoming-actions" style="margin-top:8px">
									<button onclick="viewBooking('hotel',3)" style="padding:7px 10px;border-radius:8px">View</button>
									<button onclick="modifyBooking('hotel',3)" style="padding:7px 10px;border-radius:8px">Modify</button>
									<button onclick="cancelBooking('hotel',3)" style="padding:7px 10px;border-radius:8px">Cancel</button>
								</div>
							</div>
						</div>

						<!-- Additional upcoming items -->
						<div class="upcoming-item" data-date="2025-12-05">
							<div class="upcoming-meta">
								<div style="font-weight:700">Flight: Tbilisi → Istanbul</div>
								<div class="muted">2025-12-05 · 14:45</div>
								<div class="progress"><div class="progress-bar" style="width:0"></div></div>
							</div>
							<div style="text-align:right">
								<div class="status confirmed">Confirmed</div>
								<div class="upcoming-actions" style="margin-top:8px">
									<button onclick="viewBooking('flight',6)" style="padding:7px 10px;border-radius:8px">View</button>
									<button onclick="modifyBooking('flight',6)" style="padding:7px 10px;border-radius:8px">Modify</button>
									<button onclick="cancelBooking('flight',6)" style="padding:7px 10px;border-radius:8px">Cancel</button>
								</div>
							</div>
						</div>

						<div class="upcoming-item" data-date="2025-12-10">
							<div class="upcoming-meta">
								<div style="font-weight:700">Hotel: Batumi Resort</div>
								<div class="muted">Check-in: 2025-12-10 · Check-out: 2025-12-14</div>
								<div class="progress"><div class="progress-bar" style="width:0"></div></div>
							</div>
							<div style="text-align:right">
								<div class="status pending">Pending</div>
								<div class="upcoming-actions" style="margin-top:8px">
									<button onclick="viewBooking('hotel',7)" style="padding:7px 10px;border-radius:8px">View</button>
									<button onclick="modifyBooking('hotel',7)" style="padding:7px 10px;border-radius:8px">Modify</button>
									<button onclick="cancelBooking('hotel',7)" style="padding:7px 10px;border-radius:8px">Cancel</button>
								</div>
							</div>
						</div>

						<div class="upcoming-item" data-date="2025-12-01">
							<div class="upcoming-meta">
								<div style="font-weight:700">Bus: Kutaisi → Tbilisi</div>
								<div class="muted">2025-12-01 · 07:30</div>
								<div class="progress"><div class="progress-bar" style="width:0"></div></div>
							</div>
							<div style="text-align:right">
								<div class="status confirmed">Confirmed</div>
								<div class="upcoming-actions" style="margin-top:8px">
									<button onclick="viewBooking('bus',8)" style="padding:7px 10px;border-radius:8px">View</button>
									<button onclick="modifyBooking('bus',8)" style="padding:7px 10px;border-radius:8px">Modify</button>
									<button onclick="cancelBooking('bus',8)" style="padding:7px 10px;border-radius:8px">Cancel</button>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Key Metrics (charts) -->
				<div class="col-8 card">
					<div class="section-title">Key Metrics</div>
					<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;align-items:start">
						<!-- Booking Trends (monthly) -->
						<div class="card" style="padding:12px">
							<div style="font-weight:700;margin-bottom:6px">Booking Trends</div>
							<canvas id="chartBookingTrends" height="150"></canvas>
						</div>

						<div class="card" style="padding:12px">
							<div style="font-weight:700;margin-bottom:6px">Upcoming vs Past</div>
							<canvas id="chartUpcomingPast" height="150"></canvas>
						</div>
						<div class="card" style="padding:12px;grid-column:1 / -1;display:flex;justify-content:center;">
							<div style="max-width:360px;width:100%;text-align:center;">
								<div style="font-weight:700;margin-bottom:6px">Booking Spend Analysis</div>
								<canvas id="chartSpend" height="140"></canvas>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Booking History and Profile -->
			<section class="grid">
				<!-- Upcoming Bookings (left) -->
				<div class="col-6 card">
					<div class="section-title">Upcoming Bookings</div>
					<div class="muted">Quick glance of your next trips with status and actions</div>
					<div style="margin-top:12px;display:flex;flex-direction:column;gap:10px">
						<!-- Reuse the upcoming-list (already above) for the detailed view, but also show days left and progress -->
						<div id="upcomingDetailed">
							<!-- JS will clone/refresh items here from the compact list for consistent data -->
						</div>
					</div>
				</div>

				<!-- Past Bookings & Insights (right) -->
				<div class="col-6 card">
					<div class="section-title">Past Bookings Overview</div>
					<div class="muted">Summary of recent trips and spending with quick rebook options</div>
					<div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
						<div style="font-weight:700">Total spent on past bookings</div>
						<div id="totalSpent" style="font-weight:700;color:var(--accent)">$0</div>
					</div>
					<div style="margin-top:12px" id="pastList">
						<!-- Past bookings list -->
						<div style="display:flex;flex-direction:column;gap:8px">
							<div style="display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;background:#fff;border:1px solid #f1f3f5">
								<div>
									<div style="font-weight:700">Hotel: Old Tbilisi Inn</div>
									<div class="muted">2025-09-10 → 2025-09-12</div>
								</div>
								<div style="text-align:right">
									<div style="font-weight:700">$120</div>
									<div style="margin-top:6px" class="actions"><button onclick="rebook(101)">Rebook</button><button onclick="preview(101)" style="padding:7px 10px;border-radius:8px">Preview</button></div>
								</div>
							</div>
							<div style="display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;background:#fff;border:1px solid #f1f3f5">
								<div>
									<div style="font-weight:700">Flight: TBZ — DXB</div>
									<div class="muted">2025-08-02 → 2025-08-04</div>
								</div>
								<div style="text-align:right">
									<div style="font-weight:700">$340</div>
									<div style="margin-top:6px" class="actions"><button onclick="rebook(102)">Rebook</button><button onclick="preview(102)" style="padding:7px 10px;border-radius:8px">Preview</button></div>
								</div>
							</div>
						</div>
						</div>
						<!-- Booking Insights charts -->
						<div style="margin-top:14px;display:grid;grid-template-columns:1fr 1fr;gap:10px;align-items:start">
							<div class="card" style="padding:10px">
								<div style="font-weight:700;margin-bottom:6px">Booking Frequency</div>
								<canvas id="chartFreq" height="140"></canvas>
							</div>
							<div class="card" style="padding:10px">
								<div style="font-weight:700;margin-bottom:6px">Spending Breakdown</div>
								<canvas id="chartSpendBreakdown" height="140"></canvas>
							</div>
						</div>
					</div>
				</div>
			</section>

			<footer style="margin-top:22px;color:var(--muted);font-size:13px">
				<div style="display:flex;justify-content:space-between;align-items:center">
					<div>© 2025 GoTripSC • <a href="#">About</a> • <a href="#">Terms</a> • <a href="#">Privacy</a></div>
					<div style="display:flex;gap:8px"><a href="#"><i class="bi bi-facebook"></i></a><a href="#"><i class="bi bi-instagram"></i></a></div>
				</div>
			</footer>
		</main>
	</div>

	<!-- Chart.js -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
	<script>
		// Utility: logout
		function logout(){
			try{localStorage.removeItem('gotripUser');}catch(e){}
			window.location.href = '../Login/signin.html';
		}

		// Sample user info from localStorage (if set)
		(function(){
			try{
				const u = JSON.parse(localStorage.getItem('gotripUser')||'null');
				if(u && u.name){
					document.getElementById('welcomeMsg').textContent = 'Welcome back, ' + u.name + '!';
					document.getElementById('profileName').textContent = u.name;
					if(u.email) document.getElementById('profileEmail').textContent = u.email;
				} else {
					document.getElementById('welcomeMsg').textContent = 'Welcome back!';
				}
			}catch(e){console.warn(e)}
		})();

		function performSearch(){
			const q=document.getElementById('quickSearch').value;
			const d=document.getElementById('searchDate').value;
			const t=document.getElementById('searchType').value;
			alert('Search: '+q+' Date:'+d+' Type:'+t+' (placeholder)');
		}

		function viewBooking(type,id){
			// placeholder - would navigate to a booking detail page
			alert('Open '+type+' booking #' + id);
		}
		function rebook(id){
			alert('Rebooking from history id: ' + id);
		}

		// Booking Trends chart removed per request

		// Travel Preferences chart removed per request

		const ctxUp = document.getElementById('chartUpcomingPast').getContext('2d');
		const chartUp = new Chart(ctxUp, {
			type:'bar',data:{labels:['Flight','Bus','Hotel'],datasets:[{label:'Past',data:[8,5,12],backgroundColor:'#6c757d'},{label:'Upcoming',data:[2,1,3],backgroundColor:'#0d6efd'}]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}
		});

		const ctxSpend = document.getElementById('chartSpend').getContext('2d');
		const chartSpend = new Chart(ctxSpend, {
			type:'pie',data:{labels:['Flights','Buses','Hotels'],datasets:[{data:[60,15,25],backgroundColor:['#0d6efd','#198754','#ffc107']}]} ,options:{responsive:true,plugins:{legend:{position:'bottom'}}}
		});

		// --- Booking Dashboard: progress bars, cloning upcoming items, and insights charts ---
		(function(){
			// populate detailed upcoming list by cloning compact items
			const compact = document.querySelectorAll('#upcomingList .upcoming-item');
			const container = document.getElementById('upcomingDetailed');
			if(container){
				container.innerHTML = '';
				compact.forEach((it, idx) => {
					const clone = it.cloneNode(true);
					// show days left and progress
					const dateStr = clone.dataset.date; // YYYY-MM-DD
					let daysLeft = null;
					if(dateStr){
						const target = new Date(dateStr + 'T00:00:00');
						const today = new Date();
						const msPerDay = 1000*60*60*24;
						daysLeft = Math.ceil((target - today)/msPerDay);
						const bar = clone.querySelector('.progress-bar');
						if(bar){
							// progress percentage relative to 30 days window
							const pct = Math.max(0, Math.min(100, Math.round((30 - daysLeft)/30*100)));
							bar.style.width = pct + '%';
						}
						// append days left text
						const meta = document.createElement('div');
						meta.style.fontSize = '13px';
						meta.style.color = 'var(--muted)';
						meta.textContent = (daysLeft>=0) ? (daysLeft + ' days left') : 'Date passed';
						clone.querySelector('.upcoming-meta').appendChild(meta);
					}
					container.appendChild(clone);
				});
			}

			// compute total spent from pastList amounts
			(function computeTotal(){
				let total = 0;
				// find prices inside #pastList
				document.querySelectorAll('#pastList div').forEach(div=>{
					const priceEl = div.querySelector('div[style] > div[style*="font-weight:700"]');
					// fallback: look for dollar amounts in text
					if(priceEl && priceEl.textContent.trim().startsWith('$')){
						total += parseFloat(priceEl.textContent.replace(/[^0-9\.\-]/g,'')) || 0;
					}
				});
				const out = document.getElementById('totalSpent');
				if(out) out.textContent = '$' + total;
			})();

			// initialize insights charts (frequency + spending breakdown)
			try{
				const fctx = document.getElementById('chartFreq').getContext('2d');
				new Chart(fctx,{type:'bar',data:{labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],datasets:[{label:'Bookings',data:[4,5,6,8,7,6,9,8,9,10,8,7],backgroundColor:'#0d6efd'}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}});
				const sctx = document.getElementById('chartSpendBreakdown').getContext('2d');
				new Chart(sctx,{type:'pie',data:{labels:['Flights','Buses','Hotels'],datasets:[{data:[50,20,30],backgroundColor:['#0d6efd','#198754','#ffc107']}]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
			}catch(e){console.warn('Insights charts init failed',e)}
		})();

		// Booking Trends (monthly) - add a line chart with Flights/Buses/Hotels
		(function(){
			const el = document.getElementById('chartBookingTrends');
			if(!el) return;
			const ctx = el.getContext('2d');
			new Chart(ctx,{
				type:'line',
				data:{
					labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
					datasets:[
						{label:'Flights',data:[4,5,6,7,8,7,9,8,9,10,11,9],borderColor:'#0d6efd',backgroundColor:'rgba(13,110,253,0.08)',tension:0.3,pointRadius:3,pointBackgroundColor:'#0d6efd'},
						{label:'Buses',data:[2,2,3,3,4,3,4,3,4,5,4,5],borderColor:'#ffc107',backgroundColor:'rgba(255,193,7,0.08)',tension:0.3,pointRadius:3,pointBackgroundColor:'#f59e0b'},
						{label:'Hotels',data:[1,1,2,2,3,3,4,4,5,5,6,5],borderColor:'#ef4444',backgroundColor:'rgba(239,68,68,0.06)',tension:0.3,pointRadius:3,pointBackgroundColor:'#ef4444'}
					]
				},
				options:{responsive:true,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true,grid:{color:'rgba(0,0,0,0.04)'}},x:{grid:{display:false}}}}
			});
		})();

		// Area statistics chart (two series) — matches the requested visual (stacked/area)
		(function(){
			const areaCanvas = document.getElementById('chartAreaStat');
			if(!areaCanvas) return;
			const ctxArea = areaCanvas.getContext('2d');
			const grad1 = ctxArea.createLinearGradient(0,0,0,220);
			grad1.addColorStop(0,'rgba(255,193,7,0.35)');
			grad1.addColorStop(1,'rgba(255,193,7,0.06)');
			const grad2 = ctxArea.createLinearGradient(0,0,0,220);
			grad2.addColorStop(0,'rgba(13,110,253,0.25)');
			grad2.addColorStop(1,'rgba(13,110,253,0.04)');

			new Chart(ctxArea,{
				type:'line',
				data:{
					labels:['Week 1','Week 2','Week 3','Week 4','Week 5'],
					datasets:[
						{label:'Lorem Ipsum',data:[30,45,40,60,55],backgroundColor:grad1,borderColor:'#ffc107',fill:true,tension:0.4,pointRadius:0},
						{label:'Dolor Amet',data:[20,35,55,50,70],backgroundColor:grad2,borderColor:'#0d6efd',fill:true,tension:0.4,pointRadius:0}
					]
				},
				options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true,grid:{color:'rgba(0,0,0,0.04)'}},x:{grid:{display:false}}}
				}
			});
		})();
	</script>
	<script>
		// Auto-highlight sidebar nav item based on current file name
		(function(){
			try{
				const path = window.location.pathname.split('/').pop();
				const links = document.querySelectorAll('.nav a, .nav-item');
				// Try matching by href filename
				Array.from(document.querySelectorAll('nav a, .nav-item')).forEach(a=>{
					try{
						const href = (a.getAttribute('href')||'').split('/').pop();
						if(href && path && href.toLowerCase() === path.toLowerCase()){
							a.classList.add('active');
						} else {
							// remove accidental active flags if they don't match
							if(a.classList.contains('active') && !(href && path && href.toLowerCase()===path.toLowerCase())){
								a.classList.remove('active');
							}
						}
					}catch(e){}
				});
			}catch(e){/* no-op */}
		})();
	</script>
</body>
</html>

